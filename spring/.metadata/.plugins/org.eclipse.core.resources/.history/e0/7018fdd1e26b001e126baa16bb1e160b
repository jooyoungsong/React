<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="board">
   <select id="getTotalCountOfReboard" resultType="int">
      select count(*) from reboard
   </select>
   <!-- num의 max값, null일 경우 0으로-->
   <select id="MaxNumOfReboard" resultType="int">
   	  select ifnull(max(num),0) from reboard
   </select>
   <!-- 같은 그룹중에서 step 보다 큰 데이터는 모두 +1 -->
   <update id="UpdateStepOfReboard" parameterType="HashMap">
   	  update reboard set restep=restep+1 where regroup=#{regroup} and restep>#{restep}
   </update>
</mapper>